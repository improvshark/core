local arg = {...}

local vocal = true;
local settingDir = core.coreDir()..'/config/user.config'
local setting = configman.load(settingDir)
if setting == nil then
	setting = {interface = "extendedShell", apis = "/user/apis", programs = "/user/programs"}
	configman.save(settingDir, setting)
end


local interfaces = {"extendedShell"}
local pastebinLink = {"wJVmXZv7"}

local function save()
	configman.save(settingDir, setting)
	print(' must restart os for changes to take affect')
end


local function use(arg)
	if arg == 'default' then
		setting.interface = 'default'
		save()
		return true
	else
		for i = 1, #interfaces do
			if arg == interfaces[i] then
				setting.interface = arg
				save()
				return true
			else
				print (' bad interface name')
				return false
			end
		end
		
	end


end


local function list()
	print("default, ")
	for i = 1, #interfaces do
		print(interfaces[i] .. ', ')
	end
end

local function install(arg)


	if fs.exists('/core/interface/'..arg) == false then
		for i = 1, #interfaces do
			if arg == interfaces[i] then

				curDir = shell.dir()
				shell.setDir('/core/interface')
				shell.run('pastebin', 'get', pastebinLink[i], interfaces[i])
				shell.setDir(curDir)

				return
			end
		end
	end
	use(arg)

end


local function main()

	if arg[1] == nil then
		print("interface <list,install> <interface> ")

	elseif arg[1] == "install" and arg[2] == nil then
		list()

	elseif arg[1] == "install" and arg[2] == 'default' then
		use('default')

	elseif arg[1] == "install" and arg[2] ~= nil then
		install(arg[2])

	elseif arg[1] == "list" then
		list()
	end
end

main()
