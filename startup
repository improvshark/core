

local coreDir = ''
shell.setDir(coreDir .. "/home")

-- louding minimum apis.
os.loadAPI(coreDir .. '/lib/json')
os.loadAPI(coreDir .. '/lib/core')

local config = core.loadConfig(coreDir .. '/etc/coreConfig');

-- building path
print('Building Path')
local path = ''
for i = 1, #config.path do
	path = path .. config.path[i]
	if i != #config.path then
		path .. ":"
	end
end
shell.setPath(path)


-- loading libs.
print("loading libs")
for i = 1, #config.lib do
	os.loadAPI(config.lib[i])
end

-- loading daemonManager.
print("loading daemon Manager")
if not daemon.isInstalled() then daemon.install() end


-- run boot programs
if config.boot ~= nil then
	for i=1, #config.boot do
		shell.run(userConfig.boot[i])
	end
end
